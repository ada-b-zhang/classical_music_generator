{"version":3,"file":"main.js","sources":["../../src/main/main.ts"],"sourcesContent":["// main.ts\nimport { app, BrowserWindow } from 'electron';\nimport path from 'path';\nimport fs from 'fs';\n\ninterface Config {\n  window?: {\n    width: number;\n    height: number;\n  };\n}\n\nfunction readConfig(): Config | null {\n  try {\n    // Try production path first\n    let configPath = path.join(app.getAppPath(), 'config.json');\n    if (!fs.existsSync(configPath)) {\n      // Fallback to dev path\n      configPath = path.join(app.getAppPath(), 'src/main/config.json');\n    }\n    const configData = fs.readFileSync(configPath, 'utf8');\n    return JSON.parse(configData);\n  } catch (error) {\n    console.error('Error reading config file:', error);\n    return null;\n  }\n}\n\nfunction createWindow(): void {\n  const config = readConfig();\n  const mainWindow = new BrowserWindow({\n    width: config?.window?.width || 1200,\n    height: config?.window?.height || 800,\n    webPreferences: {\n      nodeIntegration: true,\n      contextIsolation: false\n    }\n  });\n\n  // In development, load from Vite dev server\n  if (process.env.NODE_ENV === 'development') {\n    mainWindow.loadURL('http://localhost:5173');\n    mainWindow.webContents.openDevTools();\n  } else {\n    // In production, load the built files\n    mainWindow.loadFile(path.join(app.getAppPath(), 'renderer/index.html'));\n  }\n}\n\napp.whenReady().then(() => {\n  createWindow();\n\n  app.on('activate', () => {\n    if (BrowserWindow.getAllWindows().length === 0) createWindow();\n  });\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') app.quit();\n});\n\n"],"names":["app","BrowserWindow"],"mappings":";;;;AAYA,SAAS,aAA4B;AAC/B,MAAA;AAEF,QAAI,aAAa,KAAK,KAAKA,SAAAA,IAAI,cAAc,aAAa;AAC1D,QAAI,CAAC,GAAG,WAAW,UAAU,GAAG;AAE9B,mBAAa,KAAK,KAAKA,SAAI,IAAA,WAAA,GAAc,sBAAsB;AAAA,IAAA;AAEjE,UAAM,aAAa,GAAG,aAAa,YAAY,MAAM;AAC9C,WAAA,KAAK,MAAM,UAAU;AAAA,WACrB,OAAO;AACN,YAAA,MAAM,8BAA8B,KAAK;AAC1C,WAAA;AAAA,EAAA;AAEX;AAEA,SAAS,eAAqB;;AAC5B,QAAM,SAAS,WAAW;AACpB,QAAA,aAAa,IAAIC,uBAAc;AAAA,IACnC,SAAO,sCAAQ,WAAR,mBAAgB,UAAS;AAAA,IAChC,UAAQ,sCAAQ,WAAR,mBAAgB,WAAU;AAAA,IAClC,gBAAgB;AAAA,MACd,iBAAiB;AAAA,MACjB,kBAAkB;AAAA,IAAA;AAAA,EACpB,CACD;AAGG,MAAA,QAAQ,IAAI,aAAa,eAAe;AAC1C,eAAW,QAAQ,uBAAuB;AAC1C,eAAW,YAAY,aAAa;AAAA,EAAA,OAC/B;AAEL,eAAW,SAAS,KAAK,KAAKD,SAAAA,IAAI,WAAW,GAAG,qBAAqB,CAAC;AAAA,EAAA;AAE1E;AAEAA,SAAAA,IAAI,UAAA,EAAY,KAAK,MAAM;AACZ,eAAA;AAETA,eAAA,GAAG,YAAY,MAAM;AACvB,QAAIC,SAAc,cAAA,cAAA,EAAgB,WAAW,EAAgB,cAAA;AAAA,EAAA,CAC9D;AACH,CAAC;AAEDD,SAAAA,IAAI,GAAG,qBAAqB,MAAM;AAChC,MAAI,QAAQ,aAAa,SAAUA,UAAAA,IAAI,KAAK;AAC9C,CAAC;"}